_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"20a2":function(e,t,n){e.exports=n("nOHt")},AKqC:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/update-profile",function(){return n("LbFW")}])},GXZs:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return b}));var r=n("o0o1"),c=n.n(r),u=n("HaE+"),a=n("AkIE");function s(e,t){return a.b.collection("users").doc(e).set(t)}function i(e,t){return a.b.collection("users").doc(e).update(t)}function o(e){return a.b.collection("users").doc(e).get()}function d(e,t){return a.b.doc(e).onSnapshot(t)}function l(){return a.b.collection("commands").doc("commandCenter").update({state:"started"})}function b(){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.b.collection("history").doc((new Date).getFullYear().toString()).delete();case 2:return e.next=4,a.b.collection("commands").doc("commandCenter").update({state:"not started"});case 4:return e.next=6,a.b.collection("users").get();case 6:return t=e.sent,n=[],t.docs.forEach((function(e){n.push(e.ref.update({person:"",personDesire:"",personDislike:""}))})),e.next=11,Promise.all(n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},LbFW:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var r=n("o0o1"),c=n.n(r),u=n("HaE+"),a=n("nKUr"),s=n("q1tI"),i=n("6xyR"),o=n("TUci"),d=n("QojX"),l=n("cWnB"),b=n("YFqc"),f=n.n(b),j=n("m3ny"),p=n("GXZs"),h=n("20a2");function O(){var e=Object(s.useRef)(null),t=Object(s.useRef)(null),n=Object(s.useRef)(null),r=Object(s.useState)(""),b=r[0],O=r[1],x=Object(s.useState)(!1),m=x[0],v=x[1],w=Object(h.useRouter)(),y=Object(j.b)().currentUser,k=Object(s.useState)({name:"",desire:"",email:"",dislike:"",personDesire:"",personDislike:""}),E=k[0],_=k[1];function C(){return(C=Object(u.a)(c.a.mark((function r(u){var a,s,i,o;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u.preventDefault(),r.prev=1,y){r.next=5;break}return O("Failed to update info"),r.abrupt("return");case 5:return O(""),v(!0),o={name:null===(a=e.current)||void 0===a?void 0:a.value,desire:null===(s=t.current)||void 0===s?void 0:s.value,dislike:null===(i=n.current)||void 0===i?void 0:i.value},r.next=10,Object(p.f)(y.uid,o);case 10:w.push("/"),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),""===r.t0&&O("Failed to create an account");case 16:v(!1);case 17:case"end":return r.stop()}}),r,null,[[1,13]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){y?Object(p.c)(y.uid).then((function(e){_(e.data())})):_({email:"",desire:"",personDesire:"",dislike:"",personDislike:"",name:"",userType:"",person:""})}),[y]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(i.a,{children:Object(a.jsxs)(i.a.Body,{children:[Object(a.jsx)("h2",{className:"text-center mb-4",children:"Update Info"}),b&&Object(a.jsx)(o.a,{variant:"danger",children:b}),Object(a.jsxs)(d.a,{onSubmit:function(e){return C.apply(this,arguments)},children:[Object(a.jsxs)(d.a.Group,{id:"name",children:[Object(a.jsx)(d.a.Label,{children:"Name"}),Object(a.jsx)(d.a.Control,{type:"text",ref:e,defaultValue:E.name,required:!0})]}),Object(a.jsxs)(d.a.Group,{id:"want",children:[Object(a.jsx)(d.a.Label,{children:"What you want"}),Object(a.jsx)(d.a.Control,{type:"text",ref:t,defaultValue:E.desire,required:!0})]}),Object(a.jsxs)(d.a.Group,{id:"dontwant",children:[Object(a.jsx)(d.a.Label,{children:"What you don't Want"}),Object(a.jsx)(d.a.Control,{type:"text",ref:n,defaultValue:E.dislike,required:!0})]}),Object(a.jsx)(l.a,{disabled:m,className:"w-100",type:"submit",children:"Update"})]})]})}),Object(a.jsx)("div",{className:"w-100 text-center mt-2",children:Object(a.jsx)(f.a,{href:"/",children:"Cancel"})})]})}},m3ny:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));var r=n("nKUr"),c=n("q1tI"),u=n("AkIE"),a=Object(c.createContext)({currentUser:null}),s=function(){return Object(c.useContext)(a)},i=function(e){var t=e.children,n=Object(c.useState)(null),s=n[0],i=n[1],o=Object(c.useState)(!0),d=o[0],l=o[1];Object(c.useEffect)((function(){return u.a.onAuthStateChanged((function(e){i(e),l(!1)}))}),[]);var b={currentUser:s};return Object(r.jsxs)(a.Provider,{value:b,children:[" ",!d&&t]})}}},[["AKqC",1,2,3,5,0,4,6,7]]]);