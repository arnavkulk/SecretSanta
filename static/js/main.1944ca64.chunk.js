(this["webpackJsonpsecret-santa-website"]=this["webpackJsonpsecret-santa-website"]||[]).push([[0],{68:function(e,t,r){"use strict";r.r(t);var n=r(3),c=r(2),a=r.n(c),s=r(26),i=r.n(s),l=r(13),j=r.n(l),o=r(19),d=r(14),u=r(86),b=r(84),O=r(85),x=r(81),h=r(12),p=r(18),m=r(43);r(56),r(57);r(44).config();var f=m.a.initializeApp({apiKey:"AIzaSyDYdwZc1XvhmTedGOB2ALV1D6HjzqeQfrw",authDomain:"secrets-91dd7.firebaseapp.com",projectId:"secrets-91dd7",storageBucket:"secrets-91dd7.appspot.com",messagingSenderId:"200284184264",appId:"1:200284184264:web:8ef308bb269c0f86850ffd",measurementId:"G-E2E3V7T4FJ"}),v=f.auth(),w=f.firestore();r(47);function g(e,t){return v.createUserWithEmailAndPassword(e,t)}function S(e,t){return v.signInWithEmailAndPassword(e,t)}function y(){return v.signOut()}function k(e){return v.sendPasswordResetEmail(e)}function N(e,t){return w.collection("users").doc(e).set(t)}function C(e,t){return w.collection("users").doc(e).update(t)}function D(e){return w.collection("users").doc(e).get()}function P(){return w.collection("commands").doc("commandCenter").update({state:"started"})}function F(){return L.apply(this,arguments)}function L(){return(L=Object(o.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection("commands").doc("commandCenter").update({state:"not started"});case 2:return e.next=4,w.collection("users").get();case 4:return t=e.sent,r=[],t.docs.forEach((function(e){r.push(e.ref.update({person:"",personDesire:"",personDislike:""}))})),e.next=9,Promise.all(r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),r=Object(c.useRef)(null),a=Object(c.useRef)(null),s=Object(c.useRef)(null),i=Object(c.useRef)(null),l=Object(c.useState)(""),m=Object(d.a)(l,2),f=m[0],v=m[1],w=Object(c.useState)(!1),S=Object(d.a)(w,2),y=S[0],k=S[1],C=Object(h.g)();function D(){return(D=Object(o.a)(j.a.mark((function n(c){var l,o,d,u,b,O,x,h,p,m;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.preventDefault(),(null===(l=r.current)||void 0===l?void 0:l.value)===(null===(o=a.current)||void 0===o?void 0:o.value)){n.next=3;break}return n.abrupt("return",v("Passwords do not match"));case 3:return n.prev=3,v(""),k(!0),n.next=8,g(null===(d=t.current)||void 0===d?void 0:d.value,null===(u=r.current)||void 0===u?void 0:u.value);case 8:if((p=n.sent).user){n.next=12;break}return v("Failed to create an account"),n.abrupt("return");case 12:return m={email:null===(b=t.current)||void 0===b?void 0:b.value,name:null===(O=e.current)||void 0===O?void 0:O.value,desire:null===(x=s.current)||void 0===x?void 0:x.value,dislike:null===(h=i.current)||void 0===h?void 0:h.value,userType:"user",personDesire:"",personDislike:"",person:""},n.next=15,N(p.user.uid,m);case 15:C.push("/SecretSanta/"),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(3),"auth/email-already-in-use"===n.t0.code?v("A user with this email already exists"):"auth/invalid-email"===n.t0.code?v("Invalid email"):"auth/weak-password"===n.t0.code?v("Password must be at least 6 characters"):"auth/user-not-found"===n.t0.code?v("No user with this email"):v("Failed to create account");case 21:k(!1);case 22:case"end":return n.stop()}}),n,null,[[3,18]])})))).apply(this,arguments)}return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.a,{children:Object(n.jsxs)(u.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),f&&Object(n.jsx)(b.a,{variant:"danger",children:f}),Object(n.jsxs)(O.a,{onSubmit:function(e){return D.apply(this,arguments)},children:[Object(n.jsxs)(O.a.Group,{id:"name",children:[Object(n.jsx)(O.a.Label,{children:"Name"}),Object(n.jsx)(O.a.Control,{type:"text",ref:e,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"email",children:[Object(n.jsx)(O.a.Label,{children:"Email"}),Object(n.jsx)(O.a.Control,{type:"email",ref:t,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"password",children:[Object(n.jsx)(O.a.Label,{children:"Password"}),Object(n.jsx)(O.a.Control,{type:"password",ref:r,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"password-confirm",children:[Object(n.jsx)(O.a.Label,{children:"Password Confirmation"}),Object(n.jsx)(O.a.Control,{type:"password",ref:a,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"want",children:[Object(n.jsx)(O.a.Label,{children:"What you want"}),Object(n.jsx)(O.a.Control,{type:"text",ref:s,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"dontwant",children:[Object(n.jsx)(O.a.Label,{children:"What you don't Want"}),Object(n.jsx)(O.a.Control,{type:"text",ref:i,required:!0})]}),Object(n.jsx)(x.a,{disabled:y,className:"w-100",type:"submit",children:"Sign Up"})]})]})}),Object(n.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(n.jsx)(p.b,{to:"/SecretSanta/login",children:"Log In"})]})]})}var R=r(82),U=Object(c.createContext)({currentUser:null}),G=function(){return Object(c.useContext)(U)},I=function(e){var t=e.children,r=Object(c.useState)(null),a=Object(d.a)(r,2),s=a[0],i=a[1],l=Object(c.useState)(!0),j=Object(d.a)(l,2),o=j[0],u=j[1];Object(c.useEffect)((function(){return v.onAuthStateChanged((function(e){i(e),u(!1)}))}),[]);var b={currentUser:s};return Object(n.jsxs)(U.Provider,{value:b,children:[" ",!o&&t]})},q=r(83);function B(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1],s=Object(c.useState)({name:"",desire:"",email:"",dislike:"",personDesire:"",personDislike:""}),i=Object(d.a)(s,2),l=i[0],O=i[1],m=Object(c.useState)("not started"),f=Object(d.a)(m,2),v=f[0],g=f[1],S=G().currentUser,k=Object(h.g)();function N(){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(""),e.prev=1,e.next=4,y();case 4:k.push("/SecretSanta/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return null===S&&k.push("/SecretSanta/login"),Object(c.useEffect)((function(){S&&D(S.uid).then((function(e){O(e.data())}))}),[S,l]),Object(c.useEffect)((function(){var e,t;e="commands/commandCenter",t=function(e){var t;g(null===(t=e.data())||void 0===t?void 0:t.state)},w.doc(e).onSnapshot(t)}),[v]),"not started"===v?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.a,{children:Object(n.jsxs)(u.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Profile"}),r&&Object(n.jsx)(b.a,{variant:"danger",children:r}),Object(n.jsx)("strong",{children:"Name:"})," ",l.name,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Email:"})," ",l.email,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Desires:"})," ",l.desire,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Dislikes:"})," ",l.dislike,"admin"===l.userType&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"w-100 text-center mt-2",children:Object(n.jsx)(x.a,{className:"w-100",onClick:P,variant:"primary",children:"Start Drawing"})})]}),Object(n.jsx)(p.b,{to:"/SecretSanta/update-profile",className:"btn btn-primary w-100 mt-3",children:"Update Profile"})]})}),Object(n.jsx)("div",{className:"w-100 text-center mt-2",children:Object(n.jsx)(x.a,{variant:"link",onClick:N,children:"Log Out"})})]}):"started"===v?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(u.a,{children:Object(n.jsxs)(u.a.Body,{children:[Object(n.jsx)("div",{className:"text-center mt-2",children:Object(n.jsx)(q.a,{color:"secondary"})}),Object(n.jsxs)("div",{className:"w-100 text-center mt-2",children:[Object(n.jsx)("h2",{children:"Pairing..."}),"admin"===l.userType&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("br",{}),Object(n.jsx)(x.a,{onClick:F,variant:"danger",className:"w-100",children:"Cancel Drawing"})]})]})]})})}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.a,{children:Object(n.jsxs)(u.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Profile"}),r&&Object(n.jsx)(b.a,{variant:"danger",children:r}),Object(n.jsx)("strong",{children:"Name:"})," ",l.name,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Email:"})," ",l.email,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Desires:"})," ",l.desire,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Dislikes:"})," ",l.dislike,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Person:"})," ",l.person,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Person Desire:"})," ",l.personDesire,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Person Dislike:"})," ",l.personDislike,"admin"===l.userType&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"w-100 text-center mt-2",children:Object(n.jsx)(x.a,{onClick:F,variant:"danger",className:"w-100",children:"Reset Drawing"})})]}),Object(n.jsx)(p.b,{to:"/SecretSanta/update-profile",className:"btn btn-primary w-100 mt-3",children:"Update Profile"})]})}),Object(n.jsx)("div",{className:"w-100 text-center mt-2",children:Object(n.jsx)(x.a,{variant:"link",onClick:N,children:"Log Out"})})]})}function A(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),r=Object(c.useState)(""),a=Object(d.a)(r,2),s=a[0],i=a[1],l=Object(c.useState)(!1),m=Object(d.a)(l,2),f=m[0],v=m[1],w=Object(h.g)();function g(){return(g=Object(o.a)(j.a.mark((function r(n){var c,a;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.prev=1,i(""),v(!0),r.next=6,S(null===(c=e.current)||void 0===c?void 0:c.value,null===(a=t.current)||void 0===a?void 0:a.value);case 6:w.push("/SecretSanta/"),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),console.log(r.t0),"auth/email-already-exists"===r.t0.code?i("A user with this email already exists"):"auth/invalid-email"===r.t0.code?i("Invalid email"):"auth/wrong-password"===r.t0.code?i("Incorrect password"):"auth/user-not-found"===r.t0.code?i("No user with this email"):i("Failed to log in");case 13:v(!1);case 14:case"end":return r.stop()}}),r,null,[[1,9]])})))).apply(this,arguments)}return null!==G().currentUser&&w.push("/SecretSanta/"),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.a,{children:Object(n.jsxs)(u.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),s&&Object(n.jsx)(b.a,{variant:"danger",children:s}),Object(n.jsxs)(O.a,{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(n.jsxs)(O.a.Group,{id:"email",children:[Object(n.jsx)(O.a.Label,{children:"Email"}),Object(n.jsx)(O.a.Control,{type:"email",ref:e,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"password",children:[Object(n.jsx)(O.a.Label,{children:"Password"}),Object(n.jsx)(O.a.Control,{type:"password",ref:t,required:!0})]}),Object(n.jsx)(x.a,{disabled:f,className:"w-100",type:"submit",children:"Log In"})]}),Object(n.jsx)("div",{className:"w-100 text-center mt-3",children:Object(n.jsx)(p.b,{to:"/SecretSanta/forgot-password",children:"Forgot Password?"})})]})}),Object(n.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(n.jsx)(p.b,{to:"/SecretSanta/signup",children:"Sign Up"})]})]})}var W=r(33),T=r(48);function V(e){var t=e.component,r=Object(T.a)(e,["component"]),c=G().currentUser;return Object(n.jsx)(h.b,Object(W.a)(Object(W.a)({},r),{},{render:function(e){return c?Object(n.jsx)(t,Object(W.a)({},e)):Object(n.jsx)(h.a,{to:"/SecretSanta/login"})}}))}var z=function(){var e=Object(c.useRef)(null),t=Object(c.useState)(""),r=Object(d.a)(t,2),a=r[0],s=r[1],i=Object(c.useState)(""),l=Object(d.a)(i,2),h=l[0],m=l[1],f=Object(c.useState)(!1),v=Object(d.a)(f,2),w=v[0],g=v[1];function S(){return(S=Object(o.a)(j.a.mark((function t(r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),t.prev=1,m(""),s(""),g(!0),!e.current){t.next=8;break}return t.next=8,k(e.current.value);case 8:m("Check your inbox for further instructions"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),s("Failed to reset password");case 14:g(!1);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.a,{children:Object(n.jsxs)(u.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),a&&Object(n.jsx)(b.a,{variant:"danger",children:a}),h&&Object(n.jsx)(b.a,{variant:"success",children:h}),Object(n.jsxs)(O.a,{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(n.jsxs)(O.a.Group,{id:"email",children:[Object(n.jsx)(O.a.Label,{children:"Email"}),Object(n.jsx)(O.a.Control,{type:"email",ref:e,required:!0})]}),Object(n.jsx)(x.a,{disabled:w,className:"w-100",type:"submit",children:"Reset Password"})]}),Object(n.jsx)("div",{className:"w-100 text-center mt-3",children:Object(n.jsx)(p.b,{to:"/SecretSanta/login",children:"Login"})})]})}),Object(n.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(n.jsx)(p.b,{to:"/SecretSanta/signup",children:"Sign Up"})]})]})};function J(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),r=Object(c.useRef)(null),a=Object(c.useState)(""),s=Object(d.a)(a,2),i=s[0],l=s[1],m=Object(c.useState)(!1),f=Object(d.a)(m,2),v=f[0],w=f[1],g=Object(h.g)(),S=G().currentUser,y=Object(c.useState)({name:"",desire:"",email:"",dislike:"",personDesire:"",personDislike:""}),k=Object(d.a)(y,2),N=k[0],P=k[1];function F(){return(F=Object(o.a)(j.a.mark((function n(c){var a,s,i,o;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.preventDefault(),n.prev=1,S){n.next=5;break}return l("Failed to update info"),n.abrupt("return");case 5:return l(""),w(!0),o={name:null===(a=e.current)||void 0===a?void 0:a.value,desire:null===(s=t.current)||void 0===s?void 0:s.value,dislike:null===(i=r.current)||void 0===i?void 0:i.value},n.next=10,C(S.uid,o);case 10:g.push("/SecretSanta/"),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),""===n.t0&&l("Failed to create an account");case 16:w(!1);case 17:case"end":return n.stop()}}),n,null,[[1,13]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){S&&D(S.uid).then((function(e){P(e.data())}))}),[S,N]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.a,{children:Object(n.jsxs)(u.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Update Info"}),i&&Object(n.jsx)(b.a,{variant:"danger",children:i}),Object(n.jsxs)(O.a,{onSubmit:function(e){return F.apply(this,arguments)},children:[Object(n.jsxs)(O.a.Group,{id:"name",children:[Object(n.jsx)(O.a.Label,{children:"Name"}),Object(n.jsx)(O.a.Control,{type:"text",ref:e,defaultValue:N.name,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"want",children:[Object(n.jsx)(O.a.Label,{children:"What you want"}),Object(n.jsx)(O.a.Control,{type:"text",ref:t,defaultValue:N.desire,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"dontwant",children:[Object(n.jsx)(O.a.Label,{children:"What you don't Want"}),Object(n.jsx)(O.a.Control,{type:"text",ref:r,defaultValue:N.dislike,required:!0})]}),Object(n.jsx)(x.a,{disabled:v,className:"w-100",type:"submit",children:"Update"})]})]})}),Object(n.jsx)("div",{className:"w-100 text-center mt-2",children:Object(n.jsx)(p.b,{to:"/SecretSanta/",children:"Cancel"})})]})}var H=function(){return Object(n.jsx)(R.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(n.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(n.jsx)(p.a,{children:Object(n.jsx)(I,{children:Object(n.jsxs)(h.d,{children:[Object(n.jsx)(V,{exact:!0,path:"/SecretSanta/",component:B}),Object(n.jsx)(V,{path:"/SecretSanta/update-profile",component:J}),Object(n.jsx)(h.b,{path:"/SecretSanta/signup",component:E}),Object(n.jsx)(h.b,{path:"/SecretSanta/login",component:A}),Object(n.jsx)(h.b,{path:"/SecretSanta/forgot-password",component:z})]})})})})})};r(67);i.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(H,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.1944ca64.chunk.js.map