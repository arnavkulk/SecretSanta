(this["webpackJsonpsecret-santa-website"]=this["webpackJsonpsecret-santa-website"]||[]).push([[0],{70:function(e,t,r){"use strict";r.r(t);var n=r(3),a=r(2),c=r.n(a),s=r(26),i=r.n(s),l=r(13),o=r.n(l),j=r(19),u=r(14),d=r(88),b=r(86),O=r(87),x=r(83),h=r(12),p=r(18),m=r(42);r(55),r(56);r(43).config();var f=m.a.initializeApp({apiKey:"AIzaSyDYdwZc1XvhmTedGOB2ALV1D6HjzqeQfrw",authDomain:"secrets-91dd7.firebaseapp.com",projectId:"secrets-91dd7",storageBucket:"secrets-91dd7.appspot.com",messagingSenderId:"200284184264",appId:"1:200284184264:web:8ef308bb269c0f86850ffd",measurementId:"G-E2E3V7T4FJ"}),v=f.auth(),g=f.firestore(),w=r(46);function S(e,t){return v.createUserWithEmailAndPassword(e,t)}function y(e,t){return v.signInWithEmailAndPassword(e,t)}function k(){return v.signOut()}function N(e){return v.sendPasswordResetEmail(e)}function C(){return D.apply(this,arguments)}function D(){return(D=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new w.a.auth.GoogleAuthProvider,e.next=3,v.signInWithRedirect(t);case 3:return e.next=5,v.getRedirectResult();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return g.collection("users").doc(e).set(t)}function F(e,t){return g.collection("users").doc(e).update(t)}function L(e){return g.collection("users").doc(e).get()}function R(){return g.collection("commands").doc("commandCenter").update({state:"started"})}function E(){return G.apply(this,arguments)}function G(){return(G=Object(j.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("history").doc((new Date).getFullYear().toString()).delete();case 2:return e.next=4,g.collection("commands").doc("commandCenter").update({state:"not started"});case 4:return e.next=6,g.collection("users").get();case 6:return t=e.sent,r=[],t.docs.forEach((function(e){r.push(e.ref.update({person:"",personDesire:"",personDislike:""}))})),e.next=11,Promise.all(r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),r=Object(a.useRef)(null),c=Object(a.useRef)(null),s=Object(a.useRef)(null),i=Object(a.useRef)(null),l=Object(a.useState)(""),m=Object(u.a)(l,2),f=m[0],v=m[1],g=Object(a.useState)(!1),w=Object(u.a)(g,2),y=w[0],k=w[1],N=Object(h.g)();function C(){return(C=Object(j.a)(o.a.mark((function n(a){var l,j,u,d,b,O,x,h,p,m;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),(null===(l=r.current)||void 0===l?void 0:l.value)===(null===(j=c.current)||void 0===j?void 0:j.value)){n.next=3;break}return n.abrupt("return",v("Passwords do not match"));case 3:return n.prev=3,v(""),k(!0),n.next=8,S(null===(u=t.current)||void 0===u?void 0:u.value,null===(d=r.current)||void 0===d?void 0:d.value);case 8:if((p=n.sent).user){n.next=12;break}return v("Failed to create an account"),n.abrupt("return");case 12:return m={email:null===(b=t.current)||void 0===b?void 0:b.value,name:null===(O=e.current)||void 0===O?void 0:O.value,desire:null===(x=s.current)||void 0===x?void 0:x.value,dislike:null===(h=i.current)||void 0===h?void 0:h.value,userType:"user",personDesire:"",personDislike:"",person:""},n.next=15,P(p.user.uid,m);case 15:N.push("/SecretSanta/"),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(3),"auth/email-already-in-use"===n.t0.code?v("A user with this email already exists"):"auth/invalid-email"===n.t0.code?v("Invalid email"):"auth/weak-password"===n.t0.code?v("Password must be at least 6 characters"):"auth/user-not-found"===n.t0.code?v("No user with this email"):v("Failed to create account");case 21:k(!1);case 22:case"end":return n.stop()}}),n,null,[[3,18]])})))).apply(this,arguments)}return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(d.a,{children:Object(n.jsxs)(d.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),f&&Object(n.jsx)(b.a,{variant:"danger",children:f}),Object(n.jsxs)(O.a,{onSubmit:function(e){return C.apply(this,arguments)},children:[Object(n.jsxs)(O.a.Group,{id:"name",children:[Object(n.jsx)(O.a.Label,{children:"Name"}),Object(n.jsx)(O.a.Control,{type:"text",ref:e,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"email",children:[Object(n.jsx)(O.a.Label,{children:"Email"}),Object(n.jsx)(O.a.Control,{type:"email",ref:t,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"password",children:[Object(n.jsx)(O.a.Label,{children:"Password"}),Object(n.jsx)(O.a.Control,{type:"password",ref:r,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"password-confirm",children:[Object(n.jsx)(O.a.Label,{children:"Password Confirmation"}),Object(n.jsx)(O.a.Control,{type:"password",ref:c,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"want",children:[Object(n.jsx)(O.a.Label,{children:"What you want"}),Object(n.jsx)(O.a.Control,{type:"text",ref:s,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"dontwant",children:[Object(n.jsx)(O.a.Label,{children:"What you don't Want"}),Object(n.jsx)(O.a.Control,{type:"text",ref:i,required:!0})]}),Object(n.jsx)(x.a,{disabled:y,className:"w-100",type:"submit",children:"Sign Up"})]})]})}),Object(n.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(n.jsx)(p.b,{to:"/SecretSanta/login",children:"Log In"})]})]})}var U=r(84),q=Object(a.createContext)({currentUser:null}),A=function(){return Object(a.useContext)(q)},B=function(e){var t=e.children,r=Object(a.useState)(null),c=Object(u.a)(r,2),s=c[0],i=c[1],l=Object(a.useState)(!0),o=Object(u.a)(l,2),j=o[0],d=o[1];Object(a.useEffect)((function(){return v.onAuthStateChanged((function(e){i(e),d(!1)}))}),[]);var b={currentUser:s};return Object(n.jsxs)(q.Provider,{value:b,children:[" ",!j&&t]})},W=r(85);function T(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),r=t[0],c=t[1],s=Object(a.useState)({name:"",desire:"",email:"",dislike:"",personDesire:"",personDislike:""}),i=Object(u.a)(s,2),l=i[0],O=i[1],m=Object(a.useState)("not started"),f=Object(u.a)(m,2),v=f[0],w=f[1],S=A().currentUser,y=Object(h.g)();function N(){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(""),e.prev=1,e.next=4,k();case 4:y.push("/SecretSanta/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return null===S&&y.push("/SecretSanta/login"),Object(a.useEffect)((function(){S&&L(S.uid).then((function(e){O(e.data())}))}),[S,l]),Object(a.useEffect)((function(){var e,t;e="commands/commandCenter",t=function(e){var t;w(null===(t=e.data())||void 0===t?void 0:t.state)},g.doc(e).onSnapshot(t)}),[v]),"not started"===v?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(d.a,{children:Object(n.jsxs)(d.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Profile"}),r&&Object(n.jsx)(b.a,{variant:"danger",children:r}),Object(n.jsx)("strong",{children:"Name:"})," ",l.name,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Email:"})," ",l.email,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Desires:"})," ",l.desire,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Dislikes:"})," ",l.dislike,"admin"===l.userType&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"w-100 text-center mt-2",children:Object(n.jsx)(x.a,{className:"w-100",onClick:R,variant:"primary",children:"Start Drawing"})})]}),Object(n.jsx)(p.b,{to:"/SecretSanta/update-profile",className:"btn btn-primary w-100 mt-3",children:"Update Profile"})]})}),Object(n.jsx)("div",{className:"w-100 text-center mt-2",children:Object(n.jsx)(x.a,{variant:"link",onClick:N,children:"Log Out"})})]}):"started"===v?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(d.a,{children:Object(n.jsxs)(d.a.Body,{children:[Object(n.jsx)("div",{className:"text-center mt-2",children:Object(n.jsx)(W.a,{color:"secondary"})}),Object(n.jsxs)("div",{className:"w-100 text-center mt-2",children:[Object(n.jsx)("h2",{children:"Pairing..."}),"admin"===l.userType&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("br",{}),Object(n.jsx)(x.a,{onClick:E,variant:"danger",className:"w-100",children:"Cancel Drawing"})]})]})]})})}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(d.a,{children:Object(n.jsxs)(d.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Profile"}),r&&Object(n.jsx)(b.a,{variant:"danger",children:r}),Object(n.jsx)("strong",{children:"Name:"})," ",l.name,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Email:"})," ",l.email,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Desires:"})," ",l.desire,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Dislikes:"})," ",l.dislike,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Person:"})," ",l.person,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Person Desire:"})," ",l.personDesire,Object(n.jsx)("br",{}),Object(n.jsx)("strong",{children:"Person Dislike:"})," ",l.personDislike,"admin"===l.userType&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"w-100 text-center mt-2",children:Object(n.jsx)(x.a,{onClick:E,variant:"danger",className:"w-100",children:"Reset Drawing"})})]}),Object(n.jsx)(p.b,{to:"/SecretSanta/update-profile",className:"btn btn-primary w-100 mt-3",children:"Update Profile"})]})}),Object(n.jsx)("div",{className:"w-100 text-center mt-2",children:Object(n.jsx)(x.a,{variant:"link",onClick:N,children:"Log Out"})})]})}function V(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),r=Object(a.useState)(""),c=Object(u.a)(r,2),s=c[0],i=c[1],l=Object(a.useState)(!1),m=Object(u.a)(l,2),f=m[0],v=m[1],g=Object(h.g)();function w(){return(w=Object(j.a)(o.a.mark((function r(n,a){var c,s;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n&&n.preventDefault(),r.prev=1,i(""),v(!0),"google"!==a){r.next=9;break}return r.next=7,C();case 7:r.next=11;break;case 9:return r.next=11,y(null===(c=e.current)||void 0===c?void 0:c.value,null===(s=t.current)||void 0===s?void 0:s.value);case 11:g.push("/SecretSanta/"),r.next=18;break;case 14:r.prev=14,r.t0=r.catch(1),console.log(r.t0),"auth/email-already-exists"===r.t0.code?i("A user with this email already exists"):"auth/invalid-email"===r.t0.code?i("Invalid email"):"auth/wrong-password"===r.t0.code?i("Incorrect password"):"auth/user-not-found"===r.t0.code?i("No user with this email"):i("Failed to log in");case 18:v(!1);case 19:case"end":return r.stop()}}),r,null,[[1,14]])})))).apply(this,arguments)}return null!==A().currentUser&&g.push("/SecretSanta/"),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(d.a,{children:Object(n.jsxs)(d.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),s&&Object(n.jsx)(b.a,{variant:"danger",children:s}),Object(n.jsxs)(O.a,{onSubmit:function(e){return function(e,t){return w.apply(this,arguments)}(e,"email")},children:[Object(n.jsxs)(O.a.Group,{id:"email",children:[Object(n.jsx)(O.a.Label,{children:"Email"}),Object(n.jsx)(O.a.Control,{type:"email",ref:e,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"password",children:[Object(n.jsx)(O.a.Label,{children:"Password"}),Object(n.jsx)(O.a.Control,{type:"password",ref:t,required:!0})]}),Object(n.jsx)(x.a,{disabled:f,className:"w-100",type:"submit",children:"Log In"})]}),Object(n.jsx)("div",{className:"w-100 text-center mt-3",children:Object(n.jsx)(p.b,{to:"/SecretSanta/forgot-password",children:"Forgot Password?"})})]})}),Object(n.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(n.jsx)(p.b,{to:"/SecretSanta/signup",children:"Sign Up"})]})]})}var z=r(33),J=r(47);function H(e){var t=e.component,r=Object(J.a)(e,["component"]),a=A().currentUser;return Object(n.jsx)(h.b,Object(z.a)(Object(z.a)({},r),{},{render:function(e){return a?Object(n.jsx)(t,Object(z.a)({},e)):Object(n.jsx)(h.a,{to:"/SecretSanta/login"})}}))}var Y=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(""),r=Object(u.a)(t,2),c=r[0],s=r[1],i=Object(a.useState)(""),l=Object(u.a)(i,2),h=l[0],m=l[1],f=Object(a.useState)(!1),v=Object(u.a)(f,2),g=v[0],w=v[1];function S(){return(S=Object(j.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),t.prev=1,m(""),s(""),w(!0),!e.current){t.next=8;break}return t.next=8,N(e.current.value);case 8:m("Check your inbox for further instructions"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),s("Failed to reset password");case 14:w(!1);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(d.a,{children:Object(n.jsxs)(d.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),c&&Object(n.jsx)(b.a,{variant:"danger",children:c}),h&&Object(n.jsx)(b.a,{variant:"success",children:h}),Object(n.jsxs)(O.a,{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(n.jsxs)(O.a.Group,{id:"email",children:[Object(n.jsx)(O.a.Label,{children:"Email"}),Object(n.jsx)(O.a.Control,{type:"email",ref:e,required:!0})]}),Object(n.jsx)(x.a,{disabled:g,className:"w-100",type:"submit",children:"Reset Password"})]}),Object(n.jsx)("div",{className:"w-100 text-center mt-3",children:Object(n.jsx)(p.b,{to:"/SecretSanta/login",children:"Login"})})]})}),Object(n.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(n.jsx)(p.b,{to:"/SecretSanta/signup",children:"Sign Up"})]})]})};function K(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),r=Object(a.useRef)(null),c=Object(a.useState)(""),s=Object(u.a)(c,2),i=s[0],l=s[1],m=Object(a.useState)(!1),f=Object(u.a)(m,2),v=f[0],g=f[1],w=Object(h.g)(),S=A().currentUser,y=Object(a.useState)({name:"",desire:"",email:"",dislike:"",personDesire:"",personDislike:""}),k=Object(u.a)(y,2),N=k[0],C=k[1];function D(){return(D=Object(j.a)(o.a.mark((function n(a){var c,s,i,j;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),n.prev=1,S){n.next=5;break}return l("Failed to update info"),n.abrupt("return");case 5:return l(""),g(!0),j={name:null===(c=e.current)||void 0===c?void 0:c.value,desire:null===(s=t.current)||void 0===s?void 0:s.value,dislike:null===(i=r.current)||void 0===i?void 0:i.value},n.next=10,F(S.uid,j);case 10:w.push("/SecretSanta/"),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),""===n.t0&&l("Failed to create an account");case 16:g(!1);case 17:case"end":return n.stop()}}),n,null,[[1,13]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){S&&L(S.uid).then((function(e){C(e.data())}))}),[S,N]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(d.a,{children:Object(n.jsxs)(d.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mb-4",children:"Update Info"}),i&&Object(n.jsx)(b.a,{variant:"danger",children:i}),Object(n.jsxs)(O.a,{onSubmit:function(e){return D.apply(this,arguments)},children:[Object(n.jsxs)(O.a.Group,{id:"name",children:[Object(n.jsx)(O.a.Label,{children:"Name"}),Object(n.jsx)(O.a.Control,{type:"text",ref:e,defaultValue:N.name,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"want",children:[Object(n.jsx)(O.a.Label,{children:"What you want"}),Object(n.jsx)(O.a.Control,{type:"text",ref:t,defaultValue:N.desire,required:!0})]}),Object(n.jsxs)(O.a.Group,{id:"dontwant",children:[Object(n.jsx)(O.a.Label,{children:"What you don't Want"}),Object(n.jsx)(O.a.Control,{type:"text",ref:r,defaultValue:N.dislike,required:!0})]}),Object(n.jsx)(x.a,{disabled:v,className:"w-100",type:"submit",children:"Update"})]})]})}),Object(n.jsx)("div",{className:"w-100 text-center mt-2",children:Object(n.jsx)(p.b,{to:"/SecretSanta/",children:"Cancel"})})]})}var M=function(){return Object(n.jsx)(U.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(n.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(n.jsx)(p.a,{children:Object(n.jsx)(B,{children:Object(n.jsxs)(h.d,{children:[Object(n.jsx)(H,{exact:!0,path:"/SecretSanta/",component:T}),Object(n.jsx)(H,{path:"/SecretSanta/update-profile",component:K}),Object(n.jsx)(h.b,{path:"/SecretSanta/signup",component:I}),Object(n.jsx)(h.b,{path:"/SecretSanta/login",component:V}),Object(n.jsx)(h.b,{path:"/SecretSanta/forgot-password",component:Y})]})})})})})};r(69);i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(M,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.f59feee5.chunk.js.map