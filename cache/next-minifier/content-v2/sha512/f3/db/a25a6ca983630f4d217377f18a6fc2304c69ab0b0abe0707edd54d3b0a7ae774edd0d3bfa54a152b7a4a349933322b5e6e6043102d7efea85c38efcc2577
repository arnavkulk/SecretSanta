{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{\"20a2\":function(e,t,n){e.exports=n(\"nOHt\")},AKqC:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/update-profile\",function(){return n(\"LbFW\")}])},GXZs:function(e,t,n){\"use strict\";n.d(t,\"b\",(function(){return s})),n.d(t,\"f\",(function(){return i})),n.d(t,\"c\",(function(){return o})),n.d(t,\"a\",(function(){return d})),n.d(t,\"e\",(function(){return l})),n.d(t,\"d\",(function(){return b}));var r=n(\"o0o1\"),c=n.n(r),u=n(\"HaE+\"),a=n(\"AkIE\");function s(e,t){return a.b.collection(\"users\").doc(e).set(t)}function i(e,t){return a.b.collection(\"users\").doc(e).update(t)}function o(e){return a.b.collection(\"users\").doc(e).get()}function d(e,t){return a.b.doc(e).onSnapshot(t)}function l(){return a.b.collection(\"commands\").doc(\"commandCenter\").update({state:\"started\"})}function b(){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.b.collection(\"history\").doc((new Date).getFullYear().toString()).delete();case 2:return e.next=4,a.b.collection(\"commands\").doc(\"commandCenter\").update({state:\"not started\"});case 4:return e.next=6,a.b.collection(\"users\").get();case 6:return t=e.sent,n=[],t.docs.forEach((function(e){n.push(e.ref.update({person:\"\",personDesire:\"\",personDislike:\"\"}))})),e.next=11,Promise.all(n);case 11:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}},LbFW:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",(function(){return O}));var r=n(\"o0o1\"),c=n.n(r),u=n(\"HaE+\"),a=n(\"nKUr\"),s=n(\"q1tI\"),i=n(\"6xyR\"),o=n(\"TUci\"),d=n(\"QojX\"),l=n(\"cWnB\"),b=n(\"YFqc\"),f=n.n(b),j=n(\"m3ny\"),p=n(\"GXZs\"),h=n(\"20a2\");function O(){var e=Object(s.useRef)(null),t=Object(s.useRef)(null),n=Object(s.useRef)(null),r=Object(s.useState)(\"\"),b=r[0],O=r[1],x=Object(s.useState)(!1),m=x[0],v=x[1],w=Object(h.useRouter)(),y=Object(j.b)().currentUser,k=Object(s.useState)({name:\"\",desire:\"\",email:\"\",dislike:\"\",personDesire:\"\",personDislike:\"\"}),E=k[0],_=k[1];function C(){return(C=Object(u.a)(c.a.mark((function r(u){var a,s,i,o;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u.preventDefault(),r.prev=1,y){r.next=5;break}return O(\"Failed to update info\"),r.abrupt(\"return\");case 5:return O(\"\"),v(!0),o={name:null===(a=e.current)||void 0===a?void 0:a.value,desire:null===(s=t.current)||void 0===s?void 0:s.value,dislike:null===(i=n.current)||void 0===i?void 0:i.value},r.next=10,Object(p.f)(y.uid,o);case 10:w.push(\"/\"),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),\"\"===r.t0&&O(\"Failed to create an account\");case 16:v(!1);case 17:case\"end\":return r.stop()}}),r,null,[[1,13]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){y?Object(p.c)(y.uid).then((function(e){_(e.data())})):_({email:\"\",desire:\"\",personDesire:\"\",dislike:\"\",personDislike:\"\",name:\"\",userType:\"\",person:\"\"})}),[y]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(i.a,{children:Object(a.jsxs)(i.a.Body,{children:[Object(a.jsx)(\"h2\",{className:\"text-center mb-4\",children:\"Update Info\"}),b&&Object(a.jsx)(o.a,{variant:\"danger\",children:b}),Object(a.jsxs)(d.a,{onSubmit:function(e){return C.apply(this,arguments)},children:[Object(a.jsxs)(d.a.Group,{id:\"name\",children:[Object(a.jsx)(d.a.Label,{children:\"Name\"}),Object(a.jsx)(d.a.Control,{type:\"text\",ref:e,defaultValue:E.name,required:!0})]}),Object(a.jsxs)(d.a.Group,{id:\"want\",children:[Object(a.jsx)(d.a.Label,{children:\"What you want\"}),Object(a.jsx)(d.a.Control,{type:\"text\",ref:t,defaultValue:E.desire,required:!0})]}),Object(a.jsxs)(d.a.Group,{id:\"dontwant\",children:[Object(a.jsx)(d.a.Label,{children:\"What you don't Want\"}),Object(a.jsx)(d.a.Control,{type:\"text\",ref:n,defaultValue:E.dislike,required:!0})]}),Object(a.jsx)(l.a,{disabled:m,className:\"w-100\",type:\"submit\",children:\"Update\"})]})]})}),Object(a.jsx)(\"div\",{className:\"w-100 text-center mt-2\",children:Object(a.jsx)(f.a,{href:\"/\",children:\"Cancel\"})})]})}},m3ny:function(e,t,n){\"use strict\";n.d(t,\"b\",(function(){return s})),n.d(t,\"a\",(function(){return i}));var r=n(\"nKUr\"),c=n(\"q1tI\"),u=n(\"AkIE\"),a=Object(c.createContext)({currentUser:null}),s=function(){return Object(c.useContext)(a)},i=function(e){var t=e.children,n=Object(c.useState)(null),s=n[0],i=n[1],o=Object(c.useState)(!0),d=o[0],l=o[1];Object(c.useEffect)((function(){return u.a.onAuthStateChanged((function(e){i(e),l(!1)}))}),[]);var b={currentUser:s};return Object(r.jsxs)(a.Provider,{value:b,children:[\" \",!d&&t]})}}},[[\"AKqC\",1,2,3,5,0,4,6,7]]]);","map":{"version":3,"sources":["static/chunks/pages/update-profile-4d9951cecf06eba2d2de.js"],"names":["_N_E","window","push","20a2","module","exports","__webpack_require__","AKqC","__NEXT_P","GXZs","__webpack_exports__","d","addUser","updateUserInfo","getUser","addListener","startDrawing","resetDrawing","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","n","_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_firebase__WEBPACK_IMPORTED_MODULE_2__","id","info","collection","doc","set","update","get","path","onSnapshot","state","_resetDrawing","apply","this","arguments","Object","a","mark","_callee","users","promises","wrap","_context","prev","next","Date","getFullYear","toString","sent","docs","forEach","ref","person","personDesire","personDislike","Promise","all","stop","LbFW","r","UpdateProfile","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_3__","react_bootstrap__WEBPACK_IMPORTED_MODULE_4__","react_bootstrap__WEBPACK_IMPORTED_MODULE_5__","react_bootstrap__WEBPACK_IMPORTED_MODULE_6__","react_bootstrap__WEBPACK_IMPORTED_MODULE_7__","next_link__WEBPACK_IMPORTED_MODULE_8__","next_link__WEBPACK_IMPORTED_MODULE_8___default","_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_9__","_scripts_db__WEBPACK_IMPORTED_MODULE_10__","next_router__WEBPACK_IMPORTED_MODULE_11__","nameRef","desireRef","dislikeRef","_useState","error","setError","_useState2","loading","setLoading","router","currentUser","_useState3","name","desire","email","dislike","userData","setUserData","_handleSubmit","e","_nameRef$current","_desireRef$current","_dislikeRef$current","data","preventDefault","abrupt","current","value","uid","t0","then","snap","userType","children","Body","className","variant","onSubmit","_x","Group","Label","Control","type","defaultValue","required","disabled","href","m3ny","useAuth","AuthProvider","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","AuthContext","_ref","setCurrentUser","onAuthStateChanged","user","Provider"],"mappings":"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"},"name":"static/chunks/pages/update-profile-4d9951cecf06eba2d2de.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[18],{\n\n/***/ \"20a2\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"nOHt\")\n\n\n/***/ }),\n\n/***/ \"AKqC\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/update-profile\",\n      function () {\n        return __webpack_require__(\"LbFW\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"GXZs\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return addUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return updateUserInfo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return getUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return addListener; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return startDrawing; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return resetDrawing; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"o0o1\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"HaE+\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"AkIE\");\n\n\n\nfunction addUser(id, info) {\n  return _firebase__WEBPACK_IMPORTED_MODULE_2__[/* db */ \"b\"].collection(\"users\").doc(id).set(info);\n}\nfunction updateUserInfo(id, info) {\n  return _firebase__WEBPACK_IMPORTED_MODULE_2__[/* db */ \"b\"].collection(\"users\").doc(id).update(info);\n}\nfunction getUser(id) {\n  return _firebase__WEBPACK_IMPORTED_MODULE_2__[/* db */ \"b\"].collection(\"users\").doc(id).get();\n}\nfunction addListener(path, onSnapshot) {\n  return _firebase__WEBPACK_IMPORTED_MODULE_2__[/* db */ \"b\"].doc(path).onSnapshot(onSnapshot);\n}\nfunction startDrawing() {\n  return _firebase__WEBPACK_IMPORTED_MODULE_2__[/* db */ \"b\"].collection(\"commands\").doc(\"commandCenter\").update({\n    state: \"started\"\n  });\n}\nfunction resetDrawing() {\n  return _resetDrawing.apply(this, arguments);\n}\n\nfunction _resetDrawing() {\n  _resetDrawing = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n    var users, promises;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _firebase__WEBPACK_IMPORTED_MODULE_2__[/* db */ \"b\"].collection(\"history\").doc(new Date().getFullYear().toString())[\"delete\"]();\n\n          case 2:\n            _context.next = 4;\n            return _firebase__WEBPACK_IMPORTED_MODULE_2__[/* db */ \"b\"].collection(\"commands\").doc(\"commandCenter\").update({\n              state: \"not started\"\n            });\n\n          case 4:\n            _context.next = 6;\n            return _firebase__WEBPACK_IMPORTED_MODULE_2__[/* db */ \"b\"].collection(\"users\").get();\n\n          case 6:\n            users = _context.sent;\n            promises = [];\n            users.docs.forEach(function (doc) {\n              promises.push(doc.ref.update({\n                person: \"\",\n                personDesire: \"\",\n                personDislike: \"\"\n              }));\n            });\n            _context.next = 11;\n            return Promise.all(promises);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _resetDrawing.apply(this, arguments);\n}\n\n/***/ }),\n\n/***/ \"LbFW\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return UpdateProfile; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"o0o1\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"HaE+\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"6xyR\");\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"TUci\");\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"QojX\");\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"cWnB\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"YFqc\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"m3ny\");\n/* harmony import */ var _scripts_db__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"GXZs\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_11__);\n\n\n\n\n\n\n\n\n\n\n\nfunction UpdateProfile() {\n  var nameRef = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(null);\n  var desireRef = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(null);\n  var dislikeRef = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(null);\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(\"\"),\n      error = _useState[0],\n      setError = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_11__[\"useRouter\"])();\n\n  var _useAuth = Object(_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_9__[/* useAuth */ \"b\"])(),\n      currentUser = _useAuth.currentUser;\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])({\n    name: \"\",\n    desire: \"\",\n    email: \"\",\n    dislike: \"\",\n    personDesire: \"\",\n    personDislike: \"\"\n  }),\n      userData = _useState3[0],\n      setUserData = _useState3[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    if (currentUser) {\n      Object(_scripts_db__WEBPACK_IMPORTED_MODULE_10__[/* getUser */ \"c\"])(currentUser.uid).then(function (snap) {\n        setUserData(snap.data());\n      });\n    } else {\n      setUserData({\n        email: \"\",\n        desire: \"\",\n        personDesire: \"\",\n        dislike: \"\",\n        personDislike: \"\",\n        name: \"\",\n        userType: \"\",\n        person: \"\"\n      });\n    }\n  }, [currentUser]);\n\n  function handleSubmit(_x) {\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function _handleSubmit() {\n    _handleSubmit = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(e) {\n      var _nameRef$current, _desireRef$current, _dislikeRef$current, data;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n\n              if (currentUser) {\n                _context.next = 5;\n                break;\n              }\n\n              setError(\"Failed to update info\");\n              return _context.abrupt(\"return\");\n\n            case 5:\n              setError(\"\");\n              setLoading(true);\n              data = {\n                name: (_nameRef$current = nameRef.current) === null || _nameRef$current === void 0 ? void 0 : _nameRef$current.value,\n                desire: (_desireRef$current = desireRef.current) === null || _desireRef$current === void 0 ? void 0 : _desireRef$current.value,\n                dislike: (_dislikeRef$current = dislikeRef.current) === null || _dislikeRef$current === void 0 ? void 0 : _dislikeRef$current.value\n              };\n              _context.next = 10;\n              return Object(_scripts_db__WEBPACK_IMPORTED_MODULE_10__[/* updateUserInfo */ \"f\"])(currentUser.uid, data);\n\n            case 10:\n              router.push(\"/\");\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](1);\n              if (_context.t0 === \"\") setError(\"Failed to create an account\");\n\n            case 16:\n              setLoading(false);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 13]]);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"Fragment\"], {\n    children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"], {\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].Body, {\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"h2\", {\n          className: \"text-center mb-4\",\n          children: \"Update Info\"\n        }), error && /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"], {\n          variant: \"danger\",\n          children: error\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"], {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Group, {\n            id: \"name\",\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Label, {\n              children: \"Name\"\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Control, {\n              type: \"text\",\n              ref: nameRef,\n              defaultValue: userData.name,\n              required: true\n            })]\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Group, {\n            id: \"want\",\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Label, {\n              children: \"What you want\"\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Control, {\n              type: \"text\",\n              ref: desireRef,\n              defaultValue: userData.desire,\n              required: true\n            })]\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Group, {\n            id: \"dontwant\",\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Label, {\n              children: \"What you don't Want\"\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Control, {\n              type: \"text\",\n              ref: dislikeRef,\n              defaultValue: userData.dislike,\n              required: true\n            })]\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"], {\n            disabled: loading,\n            className: \"w-100\",\n            type: \"submit\",\n            children: \"Update\"\n          })]\n        })]\n      })\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"div\", {\n      className: \"w-100 text-center mt-2\",\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(next_link__WEBPACK_IMPORTED_MODULE_8___default.a, {\n        href: \"/\",\n        children: \"Cancel\"\n      })\n    })]\n  });\n}\n\n/***/ }),\n\n/***/ \"m3ny\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return useAuth; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return AuthProvider; });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"AkIE\");\n\n\n\nvar AuthContext = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__[\"createContext\"])({\n  currentUser: null\n});\nvar useAuth = function useAuth() {\n  return Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useContext\"])(AuthContext);\n};\nvar AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(null),\n      currentUser = _useState[0],\n      setCurrentUser = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    var unsubscribe = _firebase__WEBPACK_IMPORTED_MODULE_2__[/* auth */ \"a\"].onAuthStateChanged(function (user) {\n      setCurrentUser(user);\n      setLoading(false);\n    });\n    return unsubscribe;\n  }, []);\n  var value = {\n    currentUser: currentUser\n  };\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(AuthContext.Provider, {\n    value: value,\n    children: [\" \", !loading && children]\n  });\n};\n\n/***/ })\n\n},[[\"AKqC\",1,2,3,5,0,4,6,7]]]);"}