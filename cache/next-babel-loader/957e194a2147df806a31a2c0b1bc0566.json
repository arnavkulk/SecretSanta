{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from \"react\";\nimport { Card, Button, Alert } from \"react-bootstrap\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport Link from \"next/link\";\nimport { logout } from \"../scripts/auth\";\nimport { getUser, addListener, startDrawing, resetDrawing } from \"../scripts/db\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { useRouter } from \"next/router\";\nexport default function Dashboard() {\n  var _useState = useState(\"\"),\n      error = _useState[0],\n      setError = _useState[1];\n\n  var _useState2 = useState({\n    name: \"\",\n    desire: \"\",\n    email: \"\",\n    dislike: \"\",\n    personDesire: \"\",\n    personDislike: \"\"\n  }),\n      userData = _useState2[0],\n      setUserData = _useState2[1];\n\n  var _useState3 = useState(\"not started\"),\n      command = _useState3[0],\n      setCommand = _useState3[1];\n\n  var _useAuth = useAuth(),\n      currentUser = _useAuth.currentUser;\n\n  var router = useRouter(); // useEffect(() => {\n  //   if (currentUser === null) {\n  //     router.push(\"/login\");\n  //   }\n  // });\n\n  function handleLogout() {\n    return _handleLogout.apply(this, arguments);\n  }\n\n  function _handleLogout() {\n    _handleLogout = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setError(\"\");\n              _context.prev = 1;\n              _context.next = 4;\n              return logout();\n\n            case 4:\n              router.push(\"/login\");\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](1);\n              setError(\"Failed to log out\");\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 7]]);\n    }));\n    return _handleLogout.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    if (currentUser) {\n      getUser(currentUser.uid).then(function (snap) {\n        setUserData(snap.data());\n      });\n    } else {\n      setUserData({\n        email: \"\",\n        desire: \"\",\n        personDesire: \"\",\n        dislike: \"\",\n        personDislike: \"\",\n        name: \"\",\n        userType: \"\",\n        person: \"\"\n      });\n    }\n  }, [currentUser]);\n  useEffect(function () {\n    console.log(\"use effect index\");\n    var unsubscribe = addListener(\"commands/commandCenter\", function (snap) {\n      var _snap$data;\n\n      setCommand((_snap$data = snap.data()) === null || _snap$data === void 0 ? void 0 : _snap$data.state);\n    });\n    return unsubscribe;\n  }, []);\n\n  if (command === \"not started\") {\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(Card, {\n        children: /*#__PURE__*/_jsx(Card.Body, {\n          children: /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"h2\", {\n              className: \"text-center mb-4\",\n              children: \"Profile\"\n            }), error && /*#__PURE__*/_jsx(Alert, {\n              variant: \"danger\",\n              children: error\n            }), /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Name:\"\n            }), \" \", userData.name, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Email:\"\n            }), \" \", userData.email, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Desires:\"\n            }), \" \", userData.desire, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Dislikes:\"\n            }), \" \", userData.dislike, userData.userType === \"admin\" && /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-100 text-center mt-2\",\n                children: /*#__PURE__*/_jsx(Button, {\n                  className: \"w-100\",\n                  onClick: startDrawing,\n                  variant: \"primary\",\n                  children: \"Start Drawing\"\n                })\n              })]\n            }), /*#__PURE__*/_jsx(Link, {\n              href: \"/update-profile\",\n              children: /*#__PURE__*/_jsx(Button, {\n                className: \"btn btn-primary w-100 mt-3\",\n                children: \"Update Profile\"\n              })\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"w-100 text-center mt-2\",\n        children: /*#__PURE__*/_jsx(Button, {\n          variant: \"link\",\n          onClick: handleLogout,\n          children: \"Log Out\"\n        })\n      })]\n    });\n  } else if (command === \"started\") {\n    return /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsx(Card, {\n        children: /*#__PURE__*/_jsxs(Card.Body, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"text-center mt-2\",\n            children: /*#__PURE__*/_jsx(CircularProgress, {\n              color: \"secondary\"\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-100 text-center mt-2\",\n            children: [/*#__PURE__*/_jsx(\"h2\", {\n              children: \"Pairing...\"\n            }), userData.userType === \"admin\" && /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Button, {\n                onClick: resetDrawing,\n                variant: \"danger\",\n                className: \"w-100\",\n                children: \"Cancel Drawing\"\n              })]\n            })]\n          })]\n        })\n      })\n    });\n  } else {\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(Card, {\n        children: /*#__PURE__*/_jsxs(Card.Body, {\n          children: [/*#__PURE__*/_jsx(\"h2\", {\n            className: \"text-center mb-4\",\n            children: \"Profile\"\n          }), error && /*#__PURE__*/_jsx(Alert, {\n            variant: \"danger\",\n            children: error\n          }), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Name:\"\n          }), \" \", userData.name, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Email:\"\n          }), \" \", userData.email, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Desires:\"\n          }), \" \", userData.desire, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Dislikes:\"\n          }), \" \", userData.dislike, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Person:\"\n          }), \" \", userData.person, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Person Desire:\"\n          }), \" \", userData.personDesire, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Person Dislike:\"\n          }), \" \", userData.personDislike, userData.userType === \"admin\" && /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"div\", {\n              className: \"w-100 text-center mt-2\",\n              children: /*#__PURE__*/_jsx(Button, {\n                onClick: resetDrawing,\n                variant: \"danger\",\n                className: \"w-100\",\n                children: \"Reset Drawing\"\n              })\n            })]\n          }), /*#__PURE__*/_jsx(Link, {\n            href: \"/update-profile\",\n            children: /*#__PURE__*/_jsx(Button, {\n              className: \"btn btn-primary w-100 mt-3\",\n              children: \"Update Profile\"\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"w-100 text-center mt-2\",\n        children: /*#__PURE__*/_jsx(Button, {\n          variant: \"link\",\n          onClick: handleLogout,\n          children: \"Log Out\"\n        })\n      })]\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module"}