{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from \"react\";\nimport { Card, Button, Alert } from \"react-bootstrap\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport Link from \"next/link\";\nimport { logout } from \"../scripts/auth\";\nimport { getUser, addListener, startDrawing, resetDrawing } from \"../scripts/db\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { useRouter } from \"next/router\";\nexport default function Dashboard() {\n  const {\n    0: error,\n    1: setError\n  } = useState(\"\");\n  const {\n    0: userData,\n    1: setUserData\n  } = useState({\n    name: \"\",\n    desire: \"\",\n    email: \"\",\n    dislike: \"\",\n    personDesire: \"\",\n    personDislike: \"\"\n  });\n  const {\n    0: command,\n    1: setCommand\n  } = useState(\"not started\");\n  const {\n    currentUser\n  } = useAuth();\n  const router = useRouter(); // useEffect(() => {\n  //   if (currentUser === null) {\n  //     router.push(\"/login\");\n  //   }\n  // });\n\n  async function handleLogout() {\n    setError(\"\");\n\n    try {\n      await logout();\n      router.push(\"/login\");\n    } catch {\n      setError(\"Failed to log out\");\n    }\n  }\n\n  useEffect(() => {\n    if (currentUser) {\n      getUser(currentUser.uid).then(snap => {\n        setUserData(snap.data());\n      });\n    } else {\n      setUserData({\n        email: \"\",\n        desire: \"\",\n        personDesire: \"\",\n        dislike: \"\",\n        personDislike: \"\",\n        name: \"\",\n        userType: \"\",\n        person: \"\"\n      });\n    }\n  }, [currentUser]);\n  useEffect(() => {\n    console.log(\"use effect index\");\n    let unsubscribe = addListener(\"commands/commandCenter\", snap => {\n      var _snap$data;\n\n      setCommand((_snap$data = snap.data()) === null || _snap$data === void 0 ? void 0 : _snap$data.state);\n    });\n    return unsubscribe;\n  }, []);\n\n  if (command === \"not started\") {\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(Card, {\n        children: /*#__PURE__*/_jsx(Card.Body, {\n          children: /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"h2\", {\n              className: \"text-center mb-4\",\n              children: \"Profile\"\n            }), error && /*#__PURE__*/_jsx(Alert, {\n              variant: \"danger\",\n              children: error\n            }), /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Name:\"\n            }), \" \", userData.name, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Email:\"\n            }), \" \", userData.email, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Desires:\"\n            }), \" \", userData.desire, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Dislikes:\"\n            }), \" \", userData.dislike, userData.userType === \"admin\" && /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-100 text-center mt-2\",\n                children: /*#__PURE__*/_jsx(Button, {\n                  className: \"w-100\",\n                  onClick: startDrawing,\n                  variant: \"primary\",\n                  children: \"Start Drawing\"\n                })\n              })]\n            }), /*#__PURE__*/_jsx(Link, {\n              href: \"/update-profile\",\n              children: /*#__PURE__*/_jsx(Button, {\n                className: \"btn btn-primary w-100 mt-3\",\n                children: \"Update Profile\"\n              })\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"w-100 text-center mt-2\",\n        children: /*#__PURE__*/_jsx(Button, {\n          variant: \"link\",\n          onClick: handleLogout,\n          children: \"Log Out\"\n        })\n      })]\n    });\n  } else if (command === \"started\") {\n    return /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsx(Card, {\n        children: /*#__PURE__*/_jsxs(Card.Body, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"text-center mt-2\",\n            children: /*#__PURE__*/_jsx(CircularProgress, {\n              color: \"secondary\"\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-100 text-center mt-2\",\n            children: [/*#__PURE__*/_jsx(\"h2\", {\n              children: \"Pairing...\"\n            }), userData.userType === \"admin\" && /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Button, {\n                onClick: resetDrawing,\n                variant: \"danger\",\n                className: \"w-100\",\n                children: \"Cancel Drawing\"\n              })]\n            })]\n          })]\n        })\n      })\n    });\n  } else {\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(Card, {\n        children: /*#__PURE__*/_jsxs(Card.Body, {\n          children: [/*#__PURE__*/_jsx(\"h2\", {\n            className: \"text-center mb-4\",\n            children: \"Profile\"\n          }), error && /*#__PURE__*/_jsx(Alert, {\n            variant: \"danger\",\n            children: error\n          }), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Name:\"\n          }), \" \", userData.name, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Email:\"\n          }), \" \", userData.email, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Desires:\"\n          }), \" \", userData.desire, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Dislikes:\"\n          }), \" \", userData.dislike, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Person:\"\n          }), \" \", userData.person, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Person Desire:\"\n          }), \" \", userData.personDesire, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Person Dislike:\"\n          }), \" \", userData.personDislike, userData.userType === \"admin\" && /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"div\", {\n              className: \"w-100 text-center mt-2\",\n              children: /*#__PURE__*/_jsx(Button, {\n                onClick: resetDrawing,\n                variant: \"danger\",\n                className: \"w-100\",\n                children: \"Reset Drawing\"\n              })\n            })]\n          }), /*#__PURE__*/_jsx(Link, {\n            href: \"/update-profile\",\n            children: /*#__PURE__*/_jsx(Button, {\n              className: \"btn btn-primary w-100 mt-3\",\n              children: \"Update Profile\"\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"w-100 text-center mt-2\",\n        children: /*#__PURE__*/_jsx(Button, {\n          variant: \"link\",\n          onClick: handleLogout,\n          children: \"Log Out\"\n        })\n      })]\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module"}